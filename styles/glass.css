/* styles/glass.css */

/* Base liquid glass panel with improved legibility */
.liquidGlass {
  /* thicker, clearer surface derived from your tokens */
  background: color-mix(in srgb, var(--glass-bg) 92%, var(--m3-surface) 8%);
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);

  border: 1.2px solid color-mix(in srgb, var(--glass-border) 70%, var(--m3-outline) 30%);
  border-radius: var(--radius-xxl);

  /* sharper edge on dark themes */
  box-shadow: 0 10px 28px rgba(0,0,0,0.28);

  transition: background var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
  overflow: hidden;
  position: relative;
}

/* Subtle, constrained highlight to avoid milky haze */
.liquidGlass::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(90% 50% at 15% 0%, rgba(255,255,255,0.06) 0%, transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.015), transparent);
  pointer-events: none;
  mix-blend-mode: screen;
  /* fade highlight downward so center stays readable */
  mask-image: linear-gradient(180deg, rgba(0,0,0,0.9), rgba(0,0,0,0.2));
}

/* Hover elevation without overwhelming glow */
.liquidGlass:hover {
  box-shadow: 0 14px 42px rgba(0,0,0,0.30);
  border-color: color-mix(in srgb, var(--m3-outline) 38%, var(--glass-border) 62%);
}

/* Optional inner layer for paragraphs/lists to maximize contrast */
.liquidGlass .glass-body {
  background: color-mix(in srgb, var(--m3-surface) 92%, transparent 8%);
  border-radius: 16px;
  padding: 12px;
}

/* Strengthen text and badge contrast on dark backgrounds */
.liquidGlass h2, .liquidGlass h3,
.liquidGlass p, .liquidGlass li, .liquidGlass .badge {
  color: color-mix(in srgb, var(--text-primary) 92%, white 8%);
}

/* Badges inside glass get a lighter base and smaller blur */
.liquidGlass .badge {
  background: color-mix(in srgb, var(--m3-surface) 82%, transparent 18%);
  border: 1px solid color-mix(in srgb, var(--m3-outline) 36%, transparent 64%);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Respect user preference to reduce transparency */
@media (prefers-reduced-transparency: reduce) {
  .liquidGlass,
  .liquidGlass .badge {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: color-mix(in srgb, var(--m3-surface) 96%, transparent 4%);
    border-color: color-mix(in srgb, var(--m3-outline) 50%, transparent 50%);
  }
}

/* Fallback when backdrop-filter isn't supported */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .liquidGlass,
  .liquidGlass .badge {
    background: color-mix(in srgb, var(--m3-surface) 92%, transparent 8%);
  }
}
/* Dark mode overrides for clarity */
@media (prefers-color-scheme: dark) {
  .liquidGlass {
    /* near-opaque base in dark to preserve contrast */
    background: color-mix(in srgb, var(--m3-surface) 94%, transparent 6%);
    backdrop-filter: blur(10px) saturate(130%);
    -webkit-backdrop-filter: blur(10px) saturate(130%);
    border-color: color-mix(in srgb, var(--m3-outline) 40%, transparent 60%);
    box-shadow: 0 12px 32px rgba(0,0,0,0.45);
  }

  /* soften and confine highlight so it doesn't haze content */
  .liquidGlass::before {
    background:
      radial-gradient(70% 40% at 12% 0%, rgba(255,255,255,0.035) 0%, transparent 55%),
      linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    mask-image: linear-gradient(180deg, rgba(0,0,0,0.95), rgba(0,0,0,0.25));
  }

  /* stronger text and badges in dark */
  .liquidGlass h2, .liquidGlass h3,
  .liquidGlass p, .liquidGlass li, .liquidGlass .badge {
    color: color-mix(in srgb, var(--text-primary) 96%, white 4%);
  }

  /* badges: mostly solid base for legibility */
  .liquidGlass .badge {
    background: color-mix(in srgb, var(--m3-surface) 90%, transparent 10%);
    border: 1px solid color-mix(in srgb, var(--m3-outline) 44%, transparent 56%);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  /* inner body for any text-heavy content inside glass */
  .liquidGlass .glass-body {
    background: color-mix(in srgb, var(--m3-surface) 95%, transparent 5%);
  }
}
